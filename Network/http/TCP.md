# 什么是 TCP

TCP 是位于传输层当中的一种提供可靠的字节流服务的协议，在 TCP 协议当中会把大块数据分成报文段为单位的数据包进行管理，而且能够确认数据最终是否送达到对方的手中

# 三次握手

TCP 协议当中的三次握手策略是为了准确无误的把数据送到目标处

在三次握手当中使用两个标记符号：SYN(synchronize)、ACK(acknowledgement)

发送端首先会发送一个带 SYN 标记的数据包给对方，在对方收到后，会回传一个带有 SYN/ACK 标记的数据表示确认收到，最后在发送端收到这个标记后，会再传一个 ACK 的数据包，表示握手结束

为了保证服务端能收接受到客户端的信息并能做出正确的应答而进行前两次(第一次和第二次)握手，为了保证客户端能够接收到服务端的信息并能做出正确的应答而进行后两次(第二次和第三次)握手。

# 四次分手

第一次分手：关闭方（可以使客户端，也可以是服务器端），设置Sequence Number和Acknowledgment Number，向主机2发送一个FIN报文段；此时，关闭方进入FIN_WAIT_1状态；这表示关闭方没有数据要发送给主机2了；

第二次分手：主机2收到了关闭方发送的FIN报文段，向关闭方回一个ACK报文段，Acknowledgment Number为Sequence Number加1；关闭方进入FIN_WAIT_2状态；主机2告诉关闭方，我“同意”你的关闭请求；

第三次分手：主机2向主关闭方发送FIN报文段，请求关闭连接，同时主机2进入LAST_ACK状态；

第四次分手：关闭方收到主机2发送的FIN报文段，向主机2发送ACK报文段，然后关闭方进入TIME_WAIT状态；主机2收到关闭方的ACK报文段以后，就关闭连接；此时，关闭方等待2MSL后依然没有收到回复，则证明Server端已正常关闭，那好，关闭方也可以关闭连接了。
