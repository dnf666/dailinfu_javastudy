# 复制算法

复制算法把内存分作两部分, 每次分配都只使用其中的一部分, 当使用的部分快要用完的时候, 就把这部分当中所有可用的对象复制到另外一块内存空间上, 然后一次性清除块占满的哪一块内存空间

复制算法解决了 标记 - 清除算法效率不高的问题, 同时只回收半块内存空间, 所以不考虑内存碎片的问题

98% 的对象的周期都很短, 为了提高内存空间的使用, 一般来讲, 不是按 1:1 来划分空间, 而是把内存空间划分为一块较大的 Eden 和两块较小的 Survivor, 其中 Eden : Survivor = 8:1, 每一次只使用其中一块 Eden 与 Survivor, 当需要进行垃圾把 Eden 与 Survivor 当中还存活的对象复制到另外一块没有使用的 Survivor 内存空间上

对于 HotSpot 来讲, 因为 Survivor 的空间较小, 所以可能会出现整理后对象复制到 Survivor 上没有足够的内存空间, 所以这个时候就会有一个担保规则

*!* 空间担保规则: 在发生 Minor GC 前, 虚拟机会检查老年代的可用的连续空间是否大于新生代所有对象总空间, 如果大于, 那么这个 Minor GC 就是安全的, 便可以用老年代进行空间担保. 如果老年代空间不足, 那么就需要进行一次 Full GC.
