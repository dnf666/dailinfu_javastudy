# G1 收集器

G1 面向服务端应用的垃圾回收器, 负责管理整个堆内存

G1 相对其它的收集器具有如下四个特点
1. 并行与并发 依旧能用多线程的优势处理垃圾
2. 分代收集 依旧把对象根据年龄分代
3. 空间整合 采用标记 - 整理的算法, 局部采用复制算法, 不会产生碎片
4. 可预测的停顿 可以让使用者规定在运行的 M 时间当中, 停顿时间最长为 N

G1 收集器的过程可以分成以下几个步骤
1. 初始标记 (Stop the world, 标记 GC ROOT 能直接关联到的对象)
2. 并发标记 (可以与用户线程并发, 从 GC ROOT 进行可达性分析)
3. 最终标记 (Stop the wolrd 但是是可以与用户线程并发的, 主要是修正之前的标记)
4. 筛选回收 (因为只有部分空间而且停顿时间很短所以建议 Stop the world 但是是可以并发的, 这个阶段对各个 Region 的价值进行排序, 根据设定来执行回收)

### G1 把内存化整为零的思路

把 Java 堆分作多个大小相等独立区域, 这个独立区域(Region), 把对象分配在这独立区域上面, 当要发生 GC 的时候, 就只在这些 Region 上面发生, 虚拟机根据内部维护的一个优先列表来决定, 这个优先列表记录了回收可以获得空间大小以及回收空间所需要的时间的经验值, 同时还维护了一个 Remembered Set 来记录当前的 Region 的引用关系
