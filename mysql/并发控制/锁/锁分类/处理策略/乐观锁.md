# 乐观锁

乐观锁认为数据操作处于一种无竞争或者少量竞争的情况, 所以在乐观锁策略不使用锁来处理并发, 而是利用 **系统版本号** 或者 **时间戳** 来控制并发, 它首先获取数据和数据当中的版本控制标识, 然后认为是没有事务与其竞争这个数据资源, 对这个数据资源直接进行处理, 然后在提交事务的时候再对比版本标识, 如果所持有的版本标识在时间维度上低于数据库当中的版本标识就意味着这个事务在处理这个数据的时候有另外的事务已经处理并且提交了对当前数据的处理, 那么这个时候事务就需要放弃操作并且回滚

一般用 **系统版本号** 或者 **时间戳** 来实现

数据安全低、并发效率高

## 处理流程

1. 线程读取记录和版本号
2. 更新记录
3. 对比当前数据库当中的该记录的版本号和已读取的版本号
4. 如果两个版本号在时间维度上是一致的, 则提交更新并且版本号 + 1, 否则回滚

## 适用环境

- 只读型场景
- 事务间的资源竞争不激烈场景
