# 多列索引

如果在一张表里面需要利用多个列来搜寻唯一一行数据, 那么我们有三个方法 **全表扫描** **建立多个单列索引** **建立一个多列索引**

**全表扫描** 的缺点是效率不高

**建立多个单列索引** 在使用多个单列索引查找的时候, 会有一个索引合并的操作, mysql 可以把它换做成 OR 条件 & AND 条件 & OR 和 AND 条件的合并, 但是由于需要对每一个列都建立索引, 那么就会使得索引膨胀很快

**建立多列索引** 多列索引把多个列建立成索引, 建立多个索引的查询是根据索引定义的第一个列开始查找, 然后当第一个列的值相同的时候, 就比较第二列的值, 以这样的方式来查找到数据, 当我们建立了 (A,B,C) 索引的时候相当于建立了 (A,B,C) & (A,B) & (A) 三个索引

## 合适的索引顺序

建立多列索引需要考虑到索引列的顺序问题, 需要通过 **具体的场景** + **索引的选择性** + **全局基数** 来衡量

**具体的场景** 指的是索引应该考虑到的例如 **排序** **分组** 这样的特殊情况, 例如当我们使用 B-Tree 当作索引的时候, 它的排序是先匹配第一列再匹配第二列, 所以这个时候, 列的顺序就很重要了, 这直接影响到排序的结果

**索引的选择性** 指的是我们在不考虑具体场景的情况下, 应该把选择性高的一列放在索引当中的前面些的位置, 因为这样的话, 能够最快的过滤出所需要的行, 同时对于在 where 子句当中只是用了索引部分的前缀列的查询来说选择性也更高

**全局基数** 指的是当一个索引存在特殊值, 根据这个特殊值查询到的结果集很大时, 就需要对这个索引做特殊的处理
